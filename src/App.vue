<template>
  <v-container >
    <v-row >
      <v-col cols="12">
             <h1 class="h1"> Административная панель </h1>     
      </v-col>
    </v-row>
   
    <!-- **************************************************** -->
    <!-- Панель для desctop экранов с разрешением >= 600 px   -->  
    <v-row class="container1">  

    <v-col sm="4" > 
    <!-- Общий размер раздела-карточки-->  
    <v-card 
      class ="card1"
      style="margin-top:20px;" 
      height="520"
      width="250"
    >
    <!-- навигационное меню (выдвижное- возможность) 
    permanent - Панель остаётся видимой независимо от размера экрана
              Панель остаётся видимой независимо от размера экрана
    mini-variant - сжимать панель -только картинки показываются

    

    -->
      <v-navigation-drawer
        v-model="drawer"
        :color="color"
        :mini-variant="miniVariant"
        :permanent="permanent"
      >
        <v-list
          dense
          nav
          class="py-0"
        >

          <v-list-item
            v-for="item in items"
            :key="item.title"
             :to='item.url'
          >
            <v-list-item-icon>
              <v-icon>{{ item.icon }}</v-icon>
            </v-list-item-icon>

            <v-list-item-content>

                 <v-list-item-title class="list-item-title">                                     
                  {{ item.title }}                      
                </v-list-item-title>
            </v-list-item-content>
          </v-list-item>
        </v-list>
      </v-navigation-drawer>
    </v-card>
    </v-col>

    <v-col sm="8">
   <v-card
      class="card2"
      style="margin-top:20px;" 
      height="520"
      width="750"
    >
          <router-view> </router-view>      
  
    </v-card>
    </v-col>
 
   </v-row>

  <!-- Панель для мобильной версии  -->
  <!-- ************************************************** -->
  
   <v-row class="container2">
       <v-card
    class="mx-auto "
    height="70"
    width="100%"
  >
    <v-system-bar color="deep-purple "></v-system-bar>

    <v-app-bar
      color="deep-purple accent-4"
      prominent
    >
      <v-app-bar-nav-icon @click.stop="drawer2 = !drawer2"></v-app-bar-nav-icon>

       <v-spacer></v-spacer>

    </v-app-bar>

  </v-card>

    <v-navigation-drawer
      height="750"
      v-model="drawer2"
      absolute      
      center
      temporary
      :color="color"
    >
      <v-list
        nav
        dense
      >
        <v-list-item-group
          v-model="group"
          active-class="deep-purple--text text--accent-4"
        >
          
           <v-list-item >

            <v-list-item-content>
              <v-list-item-title>User</v-list-item-title>
              <v-list-item-subtitle>Иванов А.В.</v-list-item-subtitle>
            </v-list-item-content>
          </v-list-item>

          <v-divider></v-divider>

          <v-list-item
            v-for="item in items"
            :key="item.title"
             :to='item.url'
          >
            <v-list-item-icon>
              <v-icon>{{ item.icon }}</v-icon>
            </v-list-item-icon>

            <v-list-item-content>

                 <v-list-item-title class="list-item-title">                                     
                  {{ item.title }}                      
                </v-list-item-title>
            </v-list-item-content>
          </v-list-item>






          </v-list-item-group>
        </v-list>
    </v-navigation-drawer>





  <v-card
      class="card2"
      style="margin-top:20px;" 
      height="480"
      width="100%"
    >
          <router-view> </router-view>      
  
    </v-card>
   
   
   
   
   
   </v-row> 


  </v-container>
</template>


<script>
  export default {
    data () {
      return {
        drawer: true,
        drawer2:false,
        group:null,
        color: "#E1F5FE",
        permanent: true,
        miniVariant: false
      }
    },
    
    
    methods: {
        closeError () {
     // Очищаем ошибки при закрытии окна с ошибками
     this.$store.dispatch('clearError')

    }

    },
    computed: {
         error() {  
     // Обращаемся к геттеру с ошибками  
    return this.$store.getters.error    
                  },
     // Обращаемся к геттеру который проверяет- 
     // залогинен ли пользователь             
   isUserLoggedIn () {
    return this.$store.getters.isUserLoggedIn
   },   

          items() {
        // Если пользователь авторизирован- показываем ему все меню   
        if (this.isUserLoggedIn){
        return [

          { title: 'Рабочие пространства', icon: 'mdi-view-dashboard', url:'/workspaces' },
          { title: 'Разработчики', icon: 'mdi-view-dashboard', url:'/developers' },
          { title: 'Команды', icon: 'mdi-view-dashboard' , url:'/teams'},
          { title: 'Проекты', icon: 'mdi-view-dashboard', url:'/projects' },
          { title: 'Группы проектов', icon: 'mdi-view-dashboard', url:'/projectgroups' },        
          { title: 'Процессы', icon: 'mdi-view-dashboard', url:'/processes' },
          { title: 'Метрики', icon: 'mdi-view-dashboard', url:'/metrics' },
          { title: 'Настройки', icon: 'mdi-view-dashboard', url:'/settings' },
          { title: 'Интеграции', icon: 'mdi-view-dashboard',url:'/integrations' },
          { title: 'Выйти из системы', icon: 'mdi-view-dashboard',url:'/logout'  }
        ]                              }
      // Если не авторизирован- показываем только меню регистрации    
      return [
      {title:'Авторизация',icon:'lock', url:'/login'}
      ]        
                 }  
             }

  }
</script>

<style scoped>

  .pointer {
    cursor:pointer;
    }



   .h1{
       text-align:center;
       color:blue;       
   }
   .list-item-title {
      font-size:18px!important;
      padding-left:10px;
   }
   .text-center{
     text-align:center;
   }

   @media (min-width: 700px) and (max-width: 800px) {

    .list-item-title {
      font-size:16px!important;
      padding-left:2px;
   }
   }
   
   @media (min-width: 600px) and (max-width: 699px) {

    .list-item-title {
      font-size:12px!important;
      padding-left:0px;
   }
     }

      @media (min-width: 0px) and (max-width: 599px) {

    .container1 {
     display:none!important;
   }
     }
       @media (min-width: 600px) {

    .container2 {
     display:none!important;
   }
     }

</style>
 